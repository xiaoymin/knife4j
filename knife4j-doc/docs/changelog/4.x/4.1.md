# v4.1.0ç‰ˆæœ¬-2023/03/23

å¤§å®¶å¥½ï¼ŒKnife4j v4.1.0ç‰ˆæœ¬å‘ç‰ˆï¼Œæœ¬æ¬¡ç‰ˆæœ¬å‘ç‰ˆä¸»è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š

- **ğŸ›å¸¸è§„Bugä¿®å¤**ï¼šä¸»è¦é’ˆå¯¹v4.0ç‰ˆæœ¬çš„å¼‚å¸¸bugã€uiå…¼å®¹æ€§é—®é¢˜ä¿®å¤
- **ğŸ„Spring Cloud Gatewayç½‘å…³èšåˆç»„ä»¶å‡çº§**ï¼šæä¾›æ‰‹åŠ¨ã€æœåŠ¡å‘ç°ä¸¤ç§æ¨¡å¼ï¼Œè½»æ¾èšåˆOpenAPIæ–‡æ¡£

## ä¸»è¦æ›´æ–°

### ğŸ›å¸¸è§„bugä¿®å¤

1ã€ç½‘å…³èšåˆç»„ä»¶knife4j-gateway-spring-boot-starteré’ˆå¯¹OpenAPI3è§„èŒƒèšåˆæ—¶ä¸¢å¤±context-pathçš„æ”¯æŒï¼Œåœ¨uiå±‚é¢åšå…¼å®¹

2ã€springdoc-openapiç‰ˆæœ¬å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬1.6.15ã€2.0.4 [Gitee#I6OIB1](https://gitee.com/xiaoym/knife4j/issues/I6OIB1)

3ã€`knife4j-openapi3-jakarta-spring-boot-starter`æ¨¡å—å±æ€§é…ç½®åœ¨ideaä¸æç¤ºçš„å¼‚å¸¸æƒ…å†µå¤„ç†

4ã€å¢å¼ºå±æ€§è‡ªå®šä¹‰æ–‡æ¡£åŠ è½½åˆ†ç»„çš„bugå¤„ç†[GitHub#PR525](https://github.com/xiaoymin/swagger-bootstrap-ui/pull/525)

5ã€`knife4j-dependencies`æ¨¡å—æ¼æ‰éƒ¨åˆ†ä¾èµ–æ¨¡å—ç‰ˆæœ¬å®šä¹‰çš„æƒ…å†µ

6ã€è§£å†³ä¸æ·»åŠ  springdoc-openapi-ui ä¾èµ–å¼‚å¸¸çš„é—®é¢˜[Gitee#I66YJA](https://gitee.com/xiaoym/knife4j/issues/I66YJA)**

7ã€é’ˆå¯¹OAS3è§„èŒƒä¸­Parameterå±æ€§ç¼ºå¤±å­—æ®µè¯´æ˜çš„å¼‚å¸¸æƒ…å†µä¿®å¤

8ã€é’ˆå¯¹OAS3è§„èŒƒä¸­æ‰©å±•å±æ€§åŒ…æ‹¬æ’åºã€ä½œè€…ç­‰ä¸ç”Ÿæ•ˆçš„é—®é¢˜[Gitee#I6FB9I](https://gitee.com/xiaoym/knife4j/issues/I6FB9I)

9ã€éƒ¨åˆ†å­—æ®µç¿»è¯‘é—®é¢˜[GitHub#540](https://github.com/xiaoymin/knife4j/issues/540)

10ã€ä½¿ç”¨å¢å¼ºå±æ€§å¼€å¯`production`æ—¶å‡ºç°çš„NPEå¼‚å¸¸[GitHub#527](https://github.com/xiaoymin/knife4j/issues/527)

11ã€é’ˆå¯¹OpenAPI3è§„èŒƒçš„tagåç§°å…¼å®¹æ€§é—®é¢˜[Gitee#I6JATP](https://gitee.com/xiaoym/knife4j/issues/I6JATP)

12ã€å®ä½“ç±»æ¥æ”¶urlå‚æ•°æ—¶æ–‡æ¡£ä¸æ˜¾ç¤ºå‚æ•°è¯´æ˜çš„é—®é¢˜[Gitee#I6H8CD](https://gitee.com/xiaoym/knife4j/issues/I6H8CD)

13ã€ä¿®å¤OAS3è§„èŒƒä¸Šä¼ ç»„ä»¶çš„è¯†åˆ«é—®é¢˜[Gitee#I6HAW0](https://gitee.com/xiaoym/knife4j/issues/I6HAW0)ã€[GitHub#538](https://github.com/xiaoymin/swagger-bootstrap-ui/issues/538)

14ã€SpringWebfluxæ¡†æ¶çš„é›†æˆç»„ä»¶starterå°è£…[GitHub#521](https://github.com/xiaoymin/knife4j/issues/521)

15ã€é’ˆå¯¹BasicéªŒè¯çš„ç‰¹æ€§å¢åŠ includeå±æ€§ï¼Œå…è®¸å¼€å‘è€…è‡ªå®šä¹‰é…ç½®[GitHub#530](https://github.com/xiaoymin/knife4j/issues/530)

16ã€å…¨å±€æœç´¢æ¡†æ”¯æŒtagåç§°çš„æ¨¡ç³Šæœç´¢[Gitee#I6NWV6](https://gitee.com/xiaoym/knife4j/issues/I6NWV6)

### ğŸ„Spring Cloud Gatewayç½‘å…³èšåˆç»„ä»¶å‡çº§

åœ¨v4.1.0ç‰ˆæœ¬ä¸­ï¼Œç»§ç»­å‡çº§Spring Cloud Gatewayç½‘å…³èšåˆç»„ä»¶ï¼Œæä¾›`discover`æœåŠ¡å‘ç°çš„æ¨¡å¼ï¼Œè‡ªåŠ¨èšåˆOpenAPIæ–‡æ¡£ã€‚ä½¿ç”¨æ–¹å¼æ›´åŠ ç®€å•ï¼Œä¸€ä¸ªStarterç»„ä»¶+ymlé…ç½®ï¼Œå³å¯å®Œæˆç½‘å…³å±‚çš„èšåˆã€‚

1ã€å¼•å…¥starterä¾èµ–ï¼Œmavenåæ ‡å¦‚ä¸‹ï¼š

```xml
<dependency>
    <groupId>com.github.xiaoymin</groupId>
    <artifactId>knife4j-gateway-spring-boot-starter</artifactId>
    <version>4.4.0</version>
</dependency>
```

2ã€åŸºäº`discover`æ¨¡å¼è‡ªåŠ¨èšåˆæ³¨å†Œä¸­å¿ƒçš„æ–‡æ¡£ï¼Œåˆ™æœ€ç®€æ´çš„é…ç½®å¦‚ä¸‹ï¼š

> æ›´å¤šåœºæ™¯caseçš„ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒ[knife4j-gateway-discussions](https://github.com/xiaoymin/knife4j/discussions/547)

```yml
knife4j:
    gateway:
        enable: true
        # æŒ‡å®šæœåŠ¡å‘ç°çš„æ¨¡å¼èšåˆå¾®æœåŠ¡æ–‡æ¡£ï¼Œå¹¶ä¸”æ˜¯é»˜è®¤`default`åˆ†ç»„
        strategy: discover
        discover:
            enable: true
            # æŒ‡å®šç‰ˆæœ¬å·(Swagger2|OpenAPI3)
            version : openapi3

```

å¦‚æ­¤ï¼Œæˆ‘ä»¬çš„èšåˆå·¥ä½œå°±å®Œæˆäº†ã€‚ 

åœ¨æµè§ˆå™¨è®¿é—®Knife4jæä¾›çš„æ–‡æ¡£åœ°å€ï¼š`http://ip:ç½‘å…³ç«¯å£/doc.html`

# ç¤ºä¾‹ç¨‹åº

æ­£æ˜¯ç”±äº 4.0 çš„æ–‡æ¡£è¿˜åœ¨è¾“å‡ºä¸­ï¼Œå› æ­¤ Knife4j åœ¨ 4.0 æ–°ç‰ˆæœ¬ä¸­ä¹Ÿæä¾›äº†ä¸åŒç‰ˆæœ¬çš„ç¤ºä¾‹ç¨‹åº

ç¤ºä¾‹å¦‚ä¸‹ï¼š

- Spring Boot 2.x + OpenAPI2 è§„èŒƒï¼š[knife4j-spring-boot27-demo](https://gitee.com/xiaoym/swagger-bootstrap-ui-demo/tree/master/knife4j-spring-boot27-demo)
- Spring Boot 2.x +OpenAPI3 è§„èŒƒï¼š[knife4j-springdoc-openapi-demo](https://gitee.com/xiaoym/swagger-bootstrap-ui-demo/tree/master/knife4j-springdoc-openapi-demo)
- Spring Boot 3+ OpenAPI3 è§„èŒƒï¼š[knife4j-spring-boot3-demo](https://gitee.com/xiaoym/swagger-bootstrap-ui-demo/tree/master/knife4j-spring-boot3-demo)
- Spring Cloud Gatewayç½‘å…³èšåˆï¼š[knife4j-openapi3-gateway](https://gitee.com/xiaoym/swagger-bootstrap-ui-demo/tree/master/knife4j-openapi3-gateway)

# ç¤¾åŒº

**æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥åŠ ç¾¤å‚ä¸è®¨è®ºè´¡çŒ®**

å…³æ³¨å…¬ä¼—å· "Knife4j"ï¼Œç‚¹å‡»èœå•è·å–åŠ ç¾¤äºŒç»´ç 

![è¾“å…¥å›¾ç‰‡è¯´æ˜](https://foruda.gitee.com/images/1661053867569480310/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png)



ä»“åº“åæ ‡

- Giteeï¼š[https://gitee.com/xiaoym/knife4j](https://gitee.com/xiaoym/knife4j)
- GitHub:[https://github.com/xiaoymin/knife4j](https://github.com/xiaoymin/knife4j)
---
id: production-forbidden-ui
title: ç”Ÿäº§ç¯å¢ƒå¦‚ä½•å±è”½Knife4jã€Swaggerç­‰Uièµ„æºå’Œæ¥å£
description: ç”Ÿäº§ç¯å¢ƒå¦‚ä½•å±è”½Knife4jç­‰Uièµ„æº
keywords:
- knife4j
- å±è”½swagger
- å±è”½knife4j
sidebar_position: 4
author: å…«ä¸€èœåˆ€
data: 2023å¹´7æœˆ19æ—¥
---

æœ¬æ–‡ä¸»è¦ä»‹ç»åœ¨ Spring Boot åº”ç”¨ä¸­,å¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒå±è”½Knife4jåŠç›¸å…³Swaggerèµ„æº

å…³è”Issuesï¼š

- âœ… [å¼€å¯ç”Ÿäº§ç¯å¢ƒ,å±è”½æ‰€æœ‰èµ„æºæ¥å£](https://gitee.com/xiaoym/knife4j/issues/I67JDM)
- âœ… [ç”Ÿäº§ç¯å¢ƒå±è”½bug](https://gitee.com/xiaoym/knife4j/issues/I4XDYE)
- âœ… [3.0.2 é…ç½®ç”Ÿäº§ç¯å¢ƒå±è”½åï¼Œä¾ç„¶å¯ä»¥è®¿é—®éƒ¨åˆ†æ¥å£](https://gitee.com/xiaoym/knife4j/issues/I2810R)
- âœ… [ymlæ ¼å¼ å±è”½Swaggeræ‰€æœ‰èµ„æºï¼Œä¸ç”Ÿæ•ˆ](https://gitee.com/xiaoym/knife4j/issues/IYSZE)
- âœ… [ç”Ÿäº§ç¯å¢ƒswagger-uiå±è”½](https://gitee.com/xiaoym/knife4j/issues/IP1HK)
- âœ… [å¼€å¯ç”Ÿäº§ç¯å¢ƒ,å±è”½Swaggeræ‰€æœ‰èµ„æºæ¥å£ å»ºè®®](https://gitee.com/xiaoym/knife4j/issues/ISBVR)
- âœ… [ç”Ÿäº§ç¯å¢ƒå±è”½é…ç½®&2.0.9ç‰ˆæœ¬é—®é¢˜](https://gitee.com/xiaoym/knife4j/issues/I4Z2Z6)
- âœ… [4.1.0 basic éªŒè¯ï¼Œ ä»»æ„è¯·æ±‚éƒ½ä¼šå¯¼è‡´è¯·æ±‚é€šè¿‡ï¼Œä»è€Œå¯¼è‡´doc.html ä¸æç¤ºéªŒè¯](https://github.com/xiaoymin/knife4j/issues/578)
- âœ… [springcloud ç”Ÿäº§ç¯å¢ƒæ— æ³•å…³é—­](https://github.com/xiaoymin/knife4j/issues/338)
- ......


ğŸ–ï¸ æœ¬æ–‡ä»“åº“ï¼š[knife4j-forbidden-api](https://github.com/xiaoymin/knife4j-demo/tree/master/knife4j-forbidden-api)


ä»ä»“åº“çš„issuesä¸­ä¸éš¾å‘ç°ï¼Œè¯¥éœ€æ±‚ç¡®ç¡®å®å®å­˜åœ¨ï¼Œè™½ç„¶åœ¨Knife4jä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¹¶æ²¡æœ‰æä¾›å±è”½èµ„æºç›¸å…³çš„é…ç½®ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šå¼€å‘è€…æäº†å»ºè®®

è¿™åœ¨ä¹‹åçš„ç‰ˆæœ¬è¿­ä»£ä¸­,Knife4jä¸»è¦æä¾›äº†[BasicéªŒè¯](/docs/features/accessControl#352-è®¿é—®é¡µé¢åŠ æƒæ§åˆ¶)å’Œ[Productionæš´åŠ›å±è”½](/docs/features/accessControl)çš„æ‰‹æ®µï¼Œè¿™äº›éƒ½æ˜¯åŸºäºå®é™…éœ€æ±‚åœºæ™¯å‡ºå‘æ¥åšçš„,ç”Ÿäº§ç¯å¢ƒå±è”½æ¥å£æè¿°ä¹Ÿæ˜¯ä¸ºäº†ä¿æŠ¤åº”ç”¨ç¨‹åºå®‰å…¨çš„ä¸€ç§æ‰‹æ®µã€‚

æœ¬æ–‡ä¸»è¦ç«™åœ¨å®é™…éœ€æ±‚ä»¥åŠä¸šåŠ¡åœºæ™¯çš„è§’åº¦ï¼Œå»åˆ†æå¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒè¿›è¡Œå±è”½æ¥å£

ä»issuesä¸­ï¼Œæˆ‘ä»¬å±è”½çš„åœºæ™¯ä¸»è¦å‘ç”Ÿåœ¨ï¼š

- âœ… å•ä½“Spring Bootåº”ç”¨å±è”½æ¥å£å’Œé™æ€uièµ„æº
- âœ… å¾®æœåŠ¡Spring Cloudã€Spring Cloud Gatewayç½‘å…³åœºæ™¯ä¸‹å±è”½æ¥å£å’Œé™æ€èµ„æº


å±è”½çš„æ‰‹æ®µä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§(æ¬¢è¿è¡¥å……):

- ğŸŒ± åŸºäºSpring Bootæ¡†æ¶æä¾›çš„`@Conditional`æ¡ä»¶æ§åˆ¶ç›¸å…³`@Bean`çš„ç”Ÿæ•ˆ
- â›” åŸºäºServletä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½
- â›°ï¸ åŸºäºGatewayç½‘å…³ä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½
- ğŸ’€ åŸºäºMavené¡¹ç›®çš„jaræ’é™¤æœºåˆ¶ä»æ ¹æºè§£å†³é—®é¢˜
- ğŸ’£ åŸºäºç”Ÿäº§ç¯å¢ƒNginxã€Ingressç­‰æ§åˆ¶è¯·æ±‚è·¯å¾„å¤„ç†

## 1.ç›®çš„

é€šè¿‡å¼€å‘è€…æå‡ºçš„issuesï¼Œå±è”½çš„ç›®çš„åŠæä¾›BasicéªŒè¯çš„æ–¹æ¡ˆæ¥åˆ†æï¼Œæˆ‘è§‰å¾—ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š

- ğŸ” ç”Ÿäº§ç¯å¢ƒä¸Šçº¿çš„ç³»ç»Ÿï¼Œå±è”½æ¥å£æè¿°æ€§è§„èŒƒï¼Œå¯¹äºç”Ÿäº§ç³»ç»Ÿæ˜¯ä¸€ç§**å®‰å…¨ä¿æŠ¤æœºåˆ¶**
- ğŸ” Basicæ–¹æ¡ˆæ›´å¸Œæœ›çš„æ˜¯èƒ½å¤Ÿä¸Šçº¿åä¹Ÿä¿ç•™æ¥å£ï¼Œè§£å†³ç”Ÿäº§ç¯å¢ƒå‡ºé—®é¢˜æ—¶ä¾¿äºè°ƒè¯•å®šä½é—®é¢˜ï¼Œå½“Basicèƒ½èµ·åˆ°ä¸€å®šçš„å®‰å…¨é˜²æŠ¤ä½œç”¨


## 2.è§£å†³æ–¹æ¡ˆ

### 2.1 ğŸŒ± åŸºäºSpring Bootæ¡†æ¶æä¾›çš„`@Conditional`æ¡ä»¶æ§åˆ¶ç›¸å…³`@Bean`çš„ç”Ÿæ•ˆ

åœ¨Spring Bootå¼€å‘æ¡†æ¶ä¸­ï¼Œæä¾›äº†ä¸€ç§æ¡ä»¶æ³¨å…¥çš„æœºåˆ¶æ³¨è§£`@Conditional`,é¡¾åæ€ä¹‰å°±æ˜¯å¯ä»¥æŒ‡å®šæˆ‘ä»¬çš„ä»£ç åœ¨ç‰¹å®šç¯å¢ƒæ‰ç”Ÿæ•ˆã€‚

å¼€å‘è€…åœ¨å†™ç¬¬ä¸‰æ–¹çš„starterçš„åŒ…æ—¶ï¼Œæ˜¯ä¸€ç§ç»å¸¸ä½¿ç”¨çš„æ‰‹æ®µã€‚æœ‰å…³`@Conditional`æ³¨è§£ç­‰æ¡ä»¶æ³¨å…¥çš„è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰åˆ†äº«çš„ä¸€ç¯‡Blog[ã€ŠSpring Bootæ¡†æ¶ä¸­å¦‚ä½•ä¼˜é›…çš„æ³¨å…¥å®ä½“Beanã€‹](https://www.xiaominfo.com/blog/springboot/2020-09-23-spring-boot-conditional)

æˆ‘ä»¬çš„éœ€æ±‚åœºæ™¯æ˜¯ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­èƒ½å¤Ÿå±è”½éƒ¨åˆ†æ¥å£ä»¥åŠUièµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ç»“åˆ`@Conditional`æ³¨è§£ä»¥åŠ`@Profile`æ³¨è§£æ¥å®ç°ä¸åŒç¯å¢ƒçš„`@Bean`åŠ è½½æœºåˆ¶å‘¢ï¼Ÿ

ç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„,è€ƒè™‘åˆ°åœ¨Spring Bootç¯å¢ƒä¸­å¤§éƒ¨åˆ†çš„ä¸­é—´ä»¶éƒ½æä¾›äº†é…ç½®åŒ–,ç±»ä¼¼`enable`å±æ€§æ¥å¼€å¯åŠ è½½é…ç½®ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨`spring.profiles`é€šè¿‡é…ç½®è¿›è¡ŒåŒºåˆ†

ç®€å•çš„ä¾‹å­ï¼šæˆ‘ä»¬å¯¹äºKnife4jçš„é…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«å¯¹åº”devç¯å¢ƒå’Œprodç¯å¢ƒ

é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š

- å¼€å‘ç¯å¢ƒ(dev)

```yml title="application-dev.yml"
knife4j:
  enable: true
  ## other properties.......

```

- ç”Ÿäº§ç¯å¢ƒ(prod)

```yml title="application-prod.yml"
knife4j:
  enable: false
  ## other properties.......

```


åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç¨‹åºåœ¨å¯åŠ¨æ—¶ï¼Œåªéœ€è¦é€šè¿‡è®¾å®šSpring Bootåº”ç”¨çš„`Profiles`ï¼Œå°±å¯ä»¥å®ç°æˆ‘ä»¬çš„æ¥å£æ— æ³•è®¿é—®ï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®š`prod`ç¯å¢ƒï¼Œé‚£ä¹ˆè®¿é—®æ–‡æ¡£æ—¶ï¼Œä¼šå‡ºç°æ¥å£404çš„æƒ…å†µ~

**æ€»ç»“ï¼š**è¿™ç§æƒ…å†µæ˜¯å¯¹äºJavaåç«¯åº”ç”¨çš„`Configuration`ç±»çº§åˆ«çš„æ§åˆ¶ï¼Œé€šè¿‡Spring Bootæ¡†æ¶æä¾›çš„`@Conditional`æ³¨è§£æ¥è¾¾åˆ°æ¡ä»¶æ³¨å…¥åŠéƒ¨åˆ†ä»£ç å¯é…ç½®ç”Ÿæ•ˆçš„ç›®çš„

è™½ç„¶ç•Œé¢å¯è®¿é—®ï¼Œä½†æ˜¯å¯¹äºæ¥å£çš„è§„èŒƒæè¿°å¹¶æ²¡æœ‰ä½œç”¨ã€‚


### 2.2 â›” åŸºäºServletä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½

åŸºäºServletä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½æ˜¯ä¸€ç§æ‹¦æˆªæœºåˆ¶ï¼Œä¸»è¦åˆ©ç”¨äº†Servletè§„èŒƒä¸‹çš„Filteræœºåˆ¶ï¼Œå¯¹æ‰€æœ‰çš„è¯·æ±‚èµ„æºè¿›è¡Œæ‹¦æˆªï¼Œå¼€å‘è€…å¯ä»¥å¯¹æ‰€æœ‰æ¶‰åŠåˆ°Knife4jã€Swaggerèµ„æºçš„è¯·æ±‚éƒ½è¿›è¡Œæ‹¦æˆªå±è”½

åœºæ™¯çš„èµ„æºæ‹¦æˆªåœ°å€å¯ä»¥å‚è€ƒæ–‡æ¡£[ã€Šè®¿é—®æƒé™æ§åˆ¶ã€‹](/docs/features/accessControl)

æˆ‘ä»¬çŸ¥é“äº†è¦å±è”½çš„èµ„æºï¼Œä»¥åŠFilteræœºåˆ¶ï¼Œæ­¤æ—¶ï¼Œå¼€å‘è€…å³å¯ä»¥è‡ªå·±å®ç°Filterä»£ç ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ°Spring Bootçš„åº”ç”¨æ¡†æ¶ä¸­æ¥å£

åœ¨Knife4jæä¾›çš„[`ProductionSecurityFilter.java`](https://gitee.com/xiaoym/knife4j/blob/dev/knife4j/knife4j-openapi2-spring-boot-starter/src/main/java/com/github/xiaoymin/knife4j/spring/filter/ProductionSecurityFilter.java) å¦‚ä¸‹ï¼š

```javascript
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest httpServletRequest = (HttpServletRequest) request;
    if (production) {
        String uri = httpServletRequest.getRequestURI();
        // åŒ¹é…åˆ¤æ–­uriåœ°å€æ˜¯å¦æˆ‘ä»¬éœ€è¦å±è”½çš„èµ„æº
        if (!match(uri)) {
            chain.doFilter(request, response);
        } else {
            HttpServletResponse resp = (HttpServletResponse) response;
            resp.setStatus(customCode);
            resp.sendError(customCode, "You do not have permission to access this page");
        }
    } else {
        chain.doFilter(request, response);
    }
}   
```


### 2.3 â›°ï¸ åŸºäºGatewayç½‘å…³ä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½

åŸºäºGatewayç½‘å…³ä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½å’ŒServletä½“ç³»ä¸‹çš„Filterè¿›è¡Œæ‹¦æˆªæ˜¯åŒä¸€ç§æ€æƒ³ï¼Œå› ä¸ºSpring Cloud Gatewayæ˜¯åŸºäºNettyé©±åŠ¨è®¾è®¡å®ç°ï¼Œä½†æ€æƒ³æ–¹æ³•æ˜¯åŒä¸€ç§

æ— éæ˜¯ä½¿ç”¨Spring Cloud Gatewayæä¾›çš„Filteræ¥å£ï¼Œè‡ªå®šä¹‰å®ç°matchåå±è”½è¿‡æ»¤

å¯ä»¥å‚è€ƒKnife4jä»£ç ä¸­çš„[`WebFluxSecurityBasicAuthFilter.java`](https://gitee.com/xiaoym/knife4j/blob/dev/knife4j/knife4j-gateway-spring-boot-starter/src/main/java/com/github/xiaoymin/knife4j/spring/gateway/filter/basic/WebFluxSecurityBasicAuthFilter.java)




### 2.4 ğŸ’€ åŸºäºMavené¡¹ç›®çš„jaræ’é™¤æœºåˆ¶ä»æ ¹æºè§£å†³é—®é¢˜

è¯¥æ–¹æ³•ä¹Ÿæ˜¯åˆ©ç”¨Mavené¡¹ç›®æä¾›çš„Profilesæœºåˆ¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ‰“åŒ…æ„å»ºçš„æ—¶å€™ï¼Œå¯ä»¥å¯¹ä¸€äº›ä¸éœ€è¦çš„jaråŒ…è¿›è¡Œexclusionæ’é™¤ï¼Œæ¯”å¦‚Knife4jçš„uiåŒ…æˆ–è€…swaggerå®˜æ–¹uiåŒ…ï¼Œè¿™ç§jaråŒ…éƒ½æ˜¯webjarç±»å‹ï¼Œé‡Œé¢å…¨éƒ¨æ˜¯é™æ€èµ„æº

`Maven`çš„`Profiles`æ˜¯ä¸€ç§é…ç½®ç®¡ç†æœºåˆ¶ï¼Œå…è®¸ä½ æ ¹æ®ä¸åŒçš„ç¯å¢ƒæˆ–æ¡ä»¶è®¾ç½®å’Œæ¿€æ´»ä¸åŒçš„æ„å»ºé…ç½®ã€‚å¯ä»¥ä½¿ç”¨Profilesæ¥å®šä¹‰ä¸€ç»„æ’ä»¶ã€ä¾èµ–é¡¹å’Œæ„å»ºé€‰é¡¹ï¼Œè¿™äº›é€‰é¡¹åœ¨ç‰¹å®šçš„æ„å»ºç¯å¢ƒä¸­ç”Ÿæ•ˆ

å¦‚æœæˆ‘ä»¬æƒ³åœ¨ç”Ÿäº§ç¯å¢ƒæ— éœ€è®¿é—®æä¾›å¤–éƒ¨å…¥å£ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ‰“åŒ…æ„å»ºçš„æ—¶å€™å¯ä»¥ç›´æ¥æ’é™¤å³å¯

åŸºäºè¿™ç§æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨é¡¹ç›®çš„`pom.xml`ä¸­é…ç½®Mavençš„Profilesï¼Œé…ç½®å¦‚ä¸‹ï¼š

```xml
<profiles>
    <profile>
        <id>dev</id>
        <activation>
            <!-- æ¿€æ´»æ¡ä»¶ä¸º"dev"ç³»ç»Ÿå±æ€§å­˜åœ¨ -->
            <property>
                <name>env</name>
                <value>dev</value>
            </property>
        </activation>
    </profile>
    <profile>
        <id>prod</id>
        <activation>
            <!-- æ¿€æ´»æ¡ä»¶ä¸º"prod"ç¯å¢ƒå˜é‡å­˜åœ¨ -->
            <property>
                <name>env</name>
                <value>prod</value>
            </property>
        </activation>
        <dependencies>
            <dependency>
                <groupId>com.github.xiaoymin</groupId>
                <artifactId>knife4j-openapi3-spring-boot-starter</artifactId>
                <exclusions>
                    <exclusion>
                        <groupId>com.github.xiaoymin</groupId>
                        <artifactId>knife4j-openapi3-ui</artifactId>
                    </exclusion>
                    <exclusion>
                        <groupId>org.webjars</groupId>
                        <artifactId>swagger-ui</artifactId>
                    </exclusion>
                </exclusions>

            </dependency>
        </dependencies>
    </profile>
</profiles>

```

åœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œä¸»è¦ä½œç”¨å¦‚ä¸‹ï¼š

- âœ… å£°æ˜äº†ä¸¤ä¸ªProfileç±»å‹ï¼Œidåˆ†åˆ«ä¸º`dev`ã€`prod`
- âœ… é…ç½®äº†ä¸¤ç§Profileç±»å‹çš„æ¿€æ´»æ¡ä»¶ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡åç§°æ¥è¿›è¡ŒåŒºåˆ†
- âœ… åœ¨`prod`ç±»å‹ä¸‹é¢ï¼Œæˆ‘ä»¬é…ç½®çš„å¼•ç”¨jarçš„`exclusions`è§„åˆ™ï¼Œè¯¥Profileç±»å‹ä¸‹ä¼šæ’é™¤`knife4j-openapi3-ui`ã€`swagger-ui`è¿™ä¸¤ä¸ªjaråŒ…ï¼Œè€Œè¿™ä¸¤ä¸ªåŒ…åˆ†åˆ«æ˜¯Knife4jå’Œswaggerå®˜ç½‘æä¾›çš„Uièµ„æºåŒ…

æ­¤æ—¶ï¼Œå½“æˆ‘ä»¬åœ¨é¡¹ç›®æ„å»ºæ‰“åŒ…æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¼ å…¥å˜é‡ï¼Œè¿›è¡Œæ„å»ºï¼Œæ’é™¤ç›¸å…³çš„jaråŒ…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```shell
mvn clean package -Pprod
```

### 2.5 ğŸ’£ åŸºäºç”Ÿäº§ç¯å¢ƒNginxã€Ingressç­‰æ§åˆ¶è¯·æ±‚è·¯å¾„å¤„ç†


ä¸Šé¢2.1~2.4æä¾›çš„æ–¹æ¡ˆéƒ½æ˜¯é€šè¿‡ä»£ç æˆ–è€…å·¥ç¨‹ä¸Šè¿›è¡Œé…ç½®ä»¥è¾¾åˆ°ç›®çš„ï¼Œå¦‚æœæˆ‘ä»¬çš„æœåŠ¡å·²ç»ä¸Šçº¿ï¼Œä¸ç®¡æ˜¯Nginxæˆ–è€…åœ¨Kubernetesé›†ç¾¤ç¯å¢ƒä¸­ï¼Œéƒ½å¯ä»¥é€šè¿‡Nginxã€Ingressç­‰ä»£ç†æœåŠ¡å™¨è¿›è¡Œé…ç½®æ‹¦æˆªå¤„ç†

ä¹Ÿä¸å¤±ä¸ºä¸€ç§å¤„ç†æ–¹å¼ã€‚

åœ¨Nginxä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®æ‹¦æˆªèµ„æºæ¥å£ï¼Œé…ç½®å¦‚ä¸‹ï¼š

```shell

location /doc.html {
    return 403;  # è¿”å› 403 çŠ¶æ€ç è¡¨ç¤ºç¦æ­¢è®¿é—®
}

location /swagger-ui.html {
    return 403;  # è¿”å› 403 çŠ¶æ€ç è¡¨ç¤ºç¦æ­¢è®¿é—®
}

// å…¶ä»–è·¯ç”±æ¥å£åŠèµ„æº

```

è€Œåœ¨Kubernetesé›†ç¾¤ç¯å¢ƒä¸­ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨Ingressæ§åˆ¶è¯·æ±‚,é…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼š

```yml

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-ingress
spec:
  rules:
    - http:
        paths:
        # è½¬å‘doc.htmlåˆ°error-service,å¯ä»¥åœ¨è¯¥æœåŠ¡ä¸­å®šä¹‰ä¸€ä¸ªé”™è¯¯é¡µé¢æˆ–è¿”å›é€‚å½“çš„é”™è¯¯ç 
          - path: /doc.html
            pathType: Prefix
            backend:
              service:
                name: error-service
                port:
                  number: 80
```

## 3.æ€»ç»“

æœ¬æ–‡ä»å·¥ç¨‹ã€ä»£ç ç­‰å¤šæ–¹è§’åº¦ç»™å¤§å®¶æä¾›äº†ä¸€ç§è§£å†³æ€è·¯æ–¹æ¡ˆï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚

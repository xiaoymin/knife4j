---
id: use-claude-fixed-issues
title: ä½¿ç”¨Claudeä¿®æ”¹Knife4jä¸­çš„issues
description: ä½¿ç”¨Claudeä¿®æ”¹Knife4jä¸­çš„issues
keywords:
- claudeä¿®æ”¹ä»£ç 
sidebar_position: 4
author: å…«ä¸€èœåˆ€
data: 2023å¹´7æœˆ15æ—¥
---

æœ¬æ–‡å’ŒKnife4jä½¿ç”¨æ— å…³ï¼Œä¸»è¦åˆ†äº«ä½œè€…åœ¨è§£å†³Knife4jçš„issuesè¿‡ç¨‹ä¸­å¦‚ä½•é€šè¿‡Claude.Aiå¿«é€Ÿè§£å†³é—®é¢˜

å…³è”Issuesï¼š
- âœ… [èƒ½å¦å‡ºä¸ªswaggerè½¬tsçš„æ’ä»¶,åœ¨æ–‡æ¡£ç®¡ç†ä¸­å¤šä¸€ä¸ª,å¯¼å‡ºts,æƒ³å¸®æˆ‘çš„ä¸‹æ¸¸å‡è½»å·¥ä½œé‡](https://gitee.com/xiaoym/knife4j/issues/I6T78E)
- âœ… [https://github.com/xiaoymin/knife4j/issues/568](https://github.com/xiaoymin/knife4j/issues/568)

## ğŸŒ‹ èƒŒæ™¯

åœ¨ä¸Šé¢çš„issuesä¸­ï¼Œæœ‰ç”¨æˆ·æåˆ°åœ¨ç›®å‰çš„Knife4jçš„ç•Œé¢ä¸­ï¼Œå¯¹äºç”Ÿæˆçš„Scriptä»£ç (ä¸»è¦æ˜¯TypeScript)ï¼Œå¯¹äºå®ä½“ç±»éƒ¨åˆ†ï¼Œç¼ºå¤±å±æ€§å®šä¹‰ï¼Œäºæ˜¯éœ€è¦è§£å†³

ä¸»è¦çš„é—®é¢˜ç‚¹ï¼š

- â“ Knife4jçš„ScriptåŠŸèƒ½æ¥æºäº[PR](https://github.com/xiaoymin/knife4j/pull/489)
- â“ ä»£ç ä¸­ä½¿ç”¨äº†[babel/generator](https://babel.dev/docs/babel-generator),è€Œæˆ‘å¯¹è¯¥ç»„ä»¶å¹¶ä¸ç†Ÿæ‚‰


## ğŸ”¥ è§£å†³è¿‡ç¨‹

### ä¼ ç»Ÿæ–¹æ¡ˆ

1ã€é¦–å…ˆï¼Œæˆ‘ç›´æ¥å®šä½åˆ°å‡½æ•°çš„æºç ï¼ŒæŸ¥çœ‹æºç ï¼Œçœ‹æ˜¯å¦æœ‰å±æ€§ç›´æ¥èƒ½å¤Ÿä½¿ç”¨ï¼Œéƒ¨åˆ†æºç ï¼š

```typescript
export interface TSPropertySignatureBuilder {
    (key: K.ExpressionKind, typeAnnotation?: K.TSTypeAnnotationKind | null, optional?: boolean): namedTypes.TSPropertySignature;
    from(params: {
        comments?: K.CommentKind[] | null;
        computed?: boolean;
        initializer?: K.ExpressionKind | null;
        key: K.ExpressionKind;
        loc?: K.SourceLocationKind | null;
        optional?: boolean;
        readonly?: boolean;
        typeAnnotation?: K.TSTypeAnnotationKind | null;
    }): namedTypes.TSPropertySignature;
}

```

![å›¾1.t.tsPropertySignatureå‡½æ•°æºç ](/images/blog/use-claude-fixed-issues/source-property.jpg)


åœ¨æºç ä¸­ï¼Œæœ‰`comments`å±æ€§ï¼Œåœ¨æ²¡æœ‰æŸ¥çœ‹å®˜ç½‘æ–‡æ¡£çš„æƒ…å†µä¸‹ï¼Œæˆ‘å§‘ä¸”ä¸€è¯•,ç›´æ¥ç»™`comments`èµ‹å€¼ï¼Œçœ‹ç›´æ¥ä¼ é€’æ˜¯å¦å¥æ•ˆ,ç»“æœå¹¶æœªä¸æ»¡æ„ã€‚



2ã€è¿™ç§æƒ…å†µä¸‹åªèƒ½å»å»çœ‹äº†[babel/generator](https://babel.dev/docs/babel-generator)çš„å®˜æ–¹æ–‡æ¡£äº†ï¼Œå»ç¿»çœ‹éƒ¨åˆ†å‡½æ•°çš„docæ–‡æ¡£å‚æ•°ï¼Œå¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°èƒ½å¤Ÿä¸ºç”Ÿæˆçš„interfaceçš„å±æ€§æ ‡æ³¨commentçš„æ–¹æ³•


ä½†æˆ‘å¹¶æ²¡æœ‰æ‰¾åˆ°æˆ‘æ‰€éœ€è¦çš„ï¼Œèƒ½å¤Ÿä¸ºç”Ÿæˆçš„propertieså¢åŠ æ³¨é‡Šçš„æ–¹æ³•


## ğŸ’¯ æ±‚åŠ©AI

æƒ³åˆ°ä¹‹å‰åœ¨ç½‘ä¸Šçœ‹åˆ°[Claude2](https://claude.ai/)å·²ç»å‘å¸ƒï¼Œæ”¯æŒ100kçš„ä¸Šä¸‹æ–‡å¹¶ä¸”å…è´¹ï¼Œå› æ­¤å†³å®šè¯•è¯•çœ‹

1ã€é¦–å…ˆæˆ‘å°†Knife4jä¸­æ•´æ®µjså‡½æ•°ä½œä¸ºé™„ä»¶è¿›è¡Œäº†ä¸Šä¼ ï¼Œå¹¶ä¸”æ„å»ºäº†Promptï¼Œå¦‚ä¸‹å›¾ï¼š

![å›¾2.Claude2ä¸­çš„Prompt](/images/blog/use-claude-fixed-issues/js-fun.jpg)

Claude2ä¹Ÿç»™å‡ºäº†ç­”æ¡ˆï¼Œä½†å¥½åƒå¹¶ä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œå¦‚ä¸‹å›¾ï¼š

![å›¾3.Claude2ä¸­å›ç­”](/images/blog/use-claude-fixed-issues/Claude-a1.png)


2ã€äºæ˜¯æˆ‘åœ¨ç»§ç»­è¿½é—®ï¼Œå› ä¸ºçŸ¥é“å…·ä½“çš„å‡½æ•°æ‰€æ‰§è¡Œçš„ä½ç½®ï¼Œæ‰€ä»¥ç›´æ¥é—®å‡½æ•°ä¸­çš„æŸä¸€ä¸ªæ–¹æ³•ï¼Œçœ‹çœ‹Claude2æ˜¯å¦èƒ½å¤Ÿå®šä½é—®é¢˜

![å›¾4.Claude2ä¸­å›ç­”](/images/blog/use-claude-fixed-issues/Claude-a2.png)

è¿™ä¸€æ¬¡ï¼ŒClaude2å¥½åƒç†è§£äº†æˆ‘çš„æ„å›¾ï¼Œå¹¶å®šä½å‡ºäº†é—®é¢˜æ‰€åœ¨ï¼Œæˆ‘æ ¹æ®æç¤ºï¼Œåœ¨ä»£ç ä¸­è¿›è¡Œäº†ä¿®æ”¹ï¼Œä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š

```typescript
export function getInterfaceBody(props, openOptional) {
  return props.map(p => {
    let ta = t.tsTypeAnnotation(getTsType(p, getBaseType(p.type), openOptional), p.description);
    let key = t.identifier(p.name);
    let pro = t.tsPropertySignature(
      key,
      ta,
      openOptional ? !p.require : false,
    )
    // å¢åŠ æ³¨é‡Š
    pro.leadingComments = [{
      type: "CommentBlock",
      value: `${p.description} `
    }]
    return pro;
  })
}

```


æ­¤æ—¶åœ¨ç•Œé¢ä¸­ï¼Œå†æ¬¡åˆ·æ–°ç•Œé¢ï¼ŒKnife4jçš„Scirptä¸­ï¼Œæ¯ä¸€ä¸ªå®šä¹‰çš„interfaceéƒ½æœ‰äº†commentï¼Œå¦‚ä¸‹å›¾ï¼š

![å›¾5.Knife4jä¸­ScriptåŠŸèƒ½](/images/blog/use-claude-fixed-issues/show.jpg)
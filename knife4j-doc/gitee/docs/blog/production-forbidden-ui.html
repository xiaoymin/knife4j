<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-blog/production-forbidden-ui">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="search" type="application/opensearchdescription+xml" title="Knife4j" href="/opensearch.xml">

<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-TKBX678",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager -->
<script src="/js/custom.js"></script>
<script src="/js/baidu.js"></script><title data-rh="true">ç”Ÿäº§ç¯å¢ƒå¦‚ä½•å±è”½Knife4jã€Swaggerç­‰Uièµ„æºå’Œæ¥å£ | Knife4j</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doc.xiaominfo.com/docs/blog/production-forbidden-ui"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ç”Ÿäº§ç¯å¢ƒå¦‚ä½•å±è”½Knife4jã€Swaggerç­‰Uièµ„æºå’Œæ¥å£ | Knife4j"><meta data-rh="true" name="description" content="ç”Ÿäº§ç¯å¢ƒå¦‚ä½•å±è”½Knife4jç­‰Uièµ„æº"><meta data-rh="true" property="og:description" content="ç”Ÿäº§ç¯å¢ƒå¦‚ä½•å±è”½Knife4jç­‰Uièµ„æº"><meta data-rh="true" name="keywords" content="knife4j,å±è”½swagger,å±è”½knife4j"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doc.xiaominfo.com/docs/blog/production-forbidden-ui"><link data-rh="true" rel="alternate" href="https://doc.xiaominfo.com/docs/blog/production-forbidden-ui" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://doc.xiaominfo.com/docs/blog/production-forbidden-ui" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3CRIMRK623-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a0cea5e9.css">
<link rel="preload" href="/assets/js/runtime~main.2cdbce79.js" as="script">
<link rel="preload" href="/assets/js/main.59d021b1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/knife4j-light.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/knife4j-dark.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Knife4j</b></a><a class="navbar__item navbar__link" href="/docs/quick-start">æ–‡æ¡£</a><a class="navbar__item navbar__link changelog" href="/docs/middleware-sources">ä¸­é—´ä»¶</a><a aria-current="page" class="navbar__item navbar__link changelog navbar__link--active" href="/docs/blog">Blog</a><a class="navbar__item navbar__link changelog" href="/docs/action">å®æˆ˜æŒ‡å—</a><a class="navbar__item navbar__link changelog" href="/docs/changelog">æ›´æ–°æ—¥å¿—</a><a class="navbar__item navbar__link changelog" href="/docs/faq">FAQ</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">æ—§ç‰ˆæœ¬</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_blank" href="/v2/index.html">2.0.9</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="toggle_MW0i colorModeToggle_x44X"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæš—é»‘æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæš—é»‘æ¨¡å¼ï¼‰"><span><svg viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg" width="14" height="14" class="lightToggleIcon_SFTY"><g clip-path="url(#clip0_833_8168)"><path d="M6.59998 8.49999C7.98069 8.49999 9.09998 7.3807 9.09998 5.99999C9.09998 4.61928 7.98069 3.49999 6.59998 3.49999C5.21926 3.49999 4.09998 4.61928 4.09998 5.99999C4.09998 7.3807 5.21926 8.49999 6.59998 8.49999Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6.59985 0.5V1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6.59985 10.5V11.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.7099 2.11L3.4199 2.82" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.77991 9.17999L10.4899 9.88999" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.09998 6H2.09998" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11.0999 6H12.0999" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.7099 9.88999L3.4199 9.17999" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.77991 2.82L10.4899 2.11" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_833_8168"><rect width="12" height="12" fill="white" transform="translate(0.599976)"></rect></clipPath></defs></svg><svg viewBox="0 0 13 12" width="14" height="14" class="darkToggleIcon_ekgs"><path d="M10.7001 6.39501C10.6215 7.24611 10.3021 8.05721 9.77927 8.7334C9.25646 9.40959 8.55189 9.92291 7.748 10.2133C6.9441 10.5036 6.07414 10.5591 5.2399 10.3731C4.40565 10.187 3.64164 9.76728 3.03726 9.1629C2.43287 8.55851 2.01312 7.7945 1.8271 6.96026C1.64108 6.12602 1.6965 5.25605 1.98688 4.45216C2.27725 3.64826 2.79056 2.94369 3.46675 2.42088C4.14294 1.89808 4.95404 1.57866 5.80515 1.50001C5.30685 2.17414 5.06707 3.00473 5.12941 3.84071C5.19175 4.6767 5.55208 5.46254 6.14485 6.05531C6.73762 6.64808 7.52346 7.0084 8.35944 7.07074C9.19542 7.13308 10.026 6.8933 10.7001 6.39501Z" stroke="currentColor" fill="transparent" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></button></div><a href="https://github.com/xiaoymin/swagger-bootstrap-ui" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon" title="View on GitHub">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>ç”Ÿäº§ç¯å¢ƒå¦‚ä½•å±è”½Knife4jã€Swaggerç­‰Uièµ„æºå’Œæ¥å£</h1></header><p>æœ¬æ–‡ä¸»è¦ä»‹ç»åœ¨ Spring Boot åº”ç”¨ä¸­,å¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒå±è”½Knife4jåŠç›¸å…³Swaggerèµ„æº</p><p>å…³è”Issuesï¼š</p><ul><li>âœ… <a href="https://gitee.com/xiaoym/knife4j/issues/I67JDM" target="_blank" rel="noopener">å¼€å¯ç”Ÿäº§ç¯å¢ƒ,å±è”½æ‰€æœ‰èµ„æºæ¥å£</a></li><li>âœ… <a href="https://gitee.com/xiaoym/knife4j/issues/I4XDYE" target="_blank" rel="noopener">ç”Ÿäº§ç¯å¢ƒå±è”½bug</a></li><li>âœ… <a href="https://gitee.com/xiaoym/knife4j/issues/I2810R" target="_blank" rel="noopener">3.0.2 é…ç½®ç”Ÿäº§ç¯å¢ƒå±è”½åï¼Œä¾ç„¶å¯ä»¥è®¿é—®éƒ¨åˆ†æ¥å£</a></li><li>âœ… <a href="https://gitee.com/xiaoym/knife4j/issues/IYSZE" target="_blank" rel="noopener">ymlæ ¼å¼ å±è”½Swaggeræ‰€æœ‰èµ„æºï¼Œä¸ç”Ÿæ•ˆ</a></li><li>âœ… <a href="https://gitee.com/xiaoym/knife4j/issues/IP1HK" target="_blank" rel="noopener">ç”Ÿäº§ç¯å¢ƒswagger-uiå±è”½</a></li><li>âœ… <a href="https://gitee.com/xiaoym/knife4j/issues/ISBVR" target="_blank" rel="noopener">å¼€å¯ç”Ÿäº§ç¯å¢ƒ,å±è”½Swaggeræ‰€æœ‰èµ„æºæ¥å£ å»ºè®®</a></li><li>âœ… <a href="https://gitee.com/xiaoym/knife4j/issues/I4Z2Z6" target="_blank" rel="noopener">ç”Ÿäº§ç¯å¢ƒå±è”½é…ç½®&amp;2.0.9ç‰ˆæœ¬é—®é¢˜</a></li><li>âœ… <a href="https://github.com/xiaoymin/knife4j/issues/578" target="_blank" rel="noopener">4.1.0 basic éªŒè¯ï¼Œ ä»»æ„è¯·æ±‚éƒ½ä¼šå¯¼è‡´è¯·æ±‚é€šè¿‡ï¼Œä»è€Œå¯¼è‡´doc.html ä¸æç¤ºéªŒè¯</a></li><li>âœ… <a href="https://github.com/xiaoymin/knife4j/issues/338" target="_blank" rel="noopener">springcloud ç”Ÿäº§ç¯å¢ƒæ— æ³•å…³é—­</a></li><li>......</li></ul><p>ğŸ–ï¸ æœ¬æ–‡ä»“åº“ï¼š<a href="https://github.com/xiaoymin/knife4j-demo/tree/master/knife4j-forbidden-api" target="_blank" rel="noopener">knife4j-forbidden-api</a></p><p>ä»ä»“åº“çš„issuesä¸­ä¸éš¾å‘ç°ï¼Œè¯¥éœ€æ±‚ç¡®ç¡®å®å®å­˜åœ¨ï¼Œè™½ç„¶åœ¨Knife4jä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¹¶æ²¡æœ‰æä¾›å±è”½èµ„æºç›¸å…³çš„é…ç½®ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šå¼€å‘è€…æäº†å»ºè®®</p><p>è¿™åœ¨ä¹‹åçš„ç‰ˆæœ¬è¿­ä»£ä¸­,Knife4jä¸»è¦æä¾›äº†<a href="/docs/features/accessControl#352-%E8%AE%BF%E9%97%AE%E9%A1%B5%E9%9D%A2%E5%8A%A0%E6%9D%83%E6%8E%A7%E5%88%B6">BasicéªŒè¯</a>å’Œ<a href="/docs/features/accessControl">Productionæš´åŠ›å±è”½</a>çš„æ‰‹æ®µï¼Œè¿™äº›éƒ½æ˜¯åŸºäºå®é™…éœ€æ±‚åœºæ™¯å‡ºå‘æ¥åšçš„,ç”Ÿäº§ç¯å¢ƒå±è”½æ¥å£æè¿°ä¹Ÿæ˜¯ä¸ºäº†ä¿æŠ¤åº”ç”¨ç¨‹åºå®‰å…¨çš„ä¸€ç§æ‰‹æ®µã€‚</p><p>æœ¬æ–‡ä¸»è¦ç«™åœ¨å®é™…éœ€æ±‚ä»¥åŠä¸šåŠ¡åœºæ™¯çš„è§’åº¦ï¼Œå»åˆ†æå¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒè¿›è¡Œå±è”½æ¥å£</p><p>ä»issuesä¸­ï¼Œæˆ‘ä»¬å±è”½çš„åœºæ™¯ä¸»è¦å‘ç”Ÿåœ¨ï¼š</p><ul><li>âœ… å•ä½“Spring Bootåº”ç”¨å±è”½æ¥å£å’Œé™æ€uièµ„æº</li><li>âœ… å¾®æœåŠ¡Spring Cloudã€Spring Cloud Gatewayç½‘å…³åœºæ™¯ä¸‹å±è”½æ¥å£å’Œé™æ€èµ„æº</li></ul><p>å±è”½çš„æ‰‹æ®µä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§(æ¬¢è¿è¡¥å……):</p><ul><li>ğŸŒ± åŸºäºSpring Bootæ¡†æ¶æä¾›çš„<code>@Conditional</code>æ¡ä»¶æ§åˆ¶ç›¸å…³<code>@Bean</code>çš„ç”Ÿæ•ˆ</li><li>â›” åŸºäºServletä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½</li><li>â›°ï¸ åŸºäºGatewayç½‘å…³ä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½</li><li>ğŸ’€ åŸºäºMavené¡¹ç›®çš„jaræ’é™¤æœºåˆ¶ä»æ ¹æºè§£å†³é—®é¢˜</li><li>ğŸ’£ åŸºäºç”Ÿäº§ç¯å¢ƒNginxã€Ingressç­‰æ§åˆ¶è¯·æ±‚è·¯å¾„å¤„ç†</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1ç›®çš„">1.ç›®çš„<a class="hash-link" href="#1ç›®çš„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šè¿‡å¼€å‘è€…æå‡ºçš„issuesï¼Œå±è”½çš„ç›®çš„åŠæä¾›BasicéªŒè¯çš„æ–¹æ¡ˆæ¥åˆ†æï¼Œæˆ‘è§‰å¾—ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>ğŸ” ç”Ÿäº§ç¯å¢ƒä¸Šçº¿çš„ç³»ç»Ÿï¼Œå±è”½æ¥å£æè¿°æ€§è§„èŒƒï¼Œå¯¹äºç”Ÿäº§ç³»ç»Ÿæ˜¯ä¸€ç§<strong>å®‰å…¨ä¿æŠ¤æœºåˆ¶</strong></li><li>ğŸ” Basicæ–¹æ¡ˆæ›´å¸Œæœ›çš„æ˜¯èƒ½å¤Ÿä¸Šçº¿åä¹Ÿä¿ç•™æ¥å£ï¼Œè§£å†³ç”Ÿäº§ç¯å¢ƒå‡ºé—®é¢˜æ—¶ä¾¿äºè°ƒè¯•å®šä½é—®é¢˜ï¼Œå½“Basicèƒ½èµ·åˆ°ä¸€å®šçš„å®‰å…¨é˜²æŠ¤ä½œç”¨</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2è§£å†³æ–¹æ¡ˆ">2.è§£å†³æ–¹æ¡ˆ<a class="hash-link" href="#2è§£å†³æ–¹æ¡ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="21--åŸºäºspring-bootæ¡†æ¶æä¾›çš„conditionalæ¡ä»¶æ§åˆ¶ç›¸å…³beançš„ç”Ÿæ•ˆ">2.1 ğŸŒ± åŸºäºSpring Bootæ¡†æ¶æä¾›çš„<code>@Conditional</code>æ¡ä»¶æ§åˆ¶ç›¸å…³<code>@Bean</code>çš„ç”Ÿæ•ˆ<a class="hash-link" href="#21--åŸºäºspring-bootæ¡†æ¶æä¾›çš„conditionalæ¡ä»¶æ§åˆ¶ç›¸å…³beançš„ç”Ÿæ•ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨Spring Bootå¼€å‘æ¡†æ¶ä¸­ï¼Œæä¾›äº†ä¸€ç§æ¡ä»¶æ³¨å…¥çš„æœºåˆ¶æ³¨è§£<code>@Conditional</code>,é¡¾åæ€ä¹‰å°±æ˜¯å¯ä»¥æŒ‡å®šæˆ‘ä»¬çš„ä»£ç åœ¨ç‰¹å®šç¯å¢ƒæ‰ç”Ÿæ•ˆã€‚</p><p>å¼€å‘è€…åœ¨å†™ç¬¬ä¸‰æ–¹çš„starterçš„åŒ…æ—¶ï¼Œæ˜¯ä¸€ç§ç»å¸¸ä½¿ç”¨çš„æ‰‹æ®µã€‚æœ‰å…³<code>@Conditional</code>æ³¨è§£ç­‰æ¡ä»¶æ³¨å…¥çš„è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰åˆ†äº«çš„ä¸€ç¯‡Blog<a href="https://www.xiaominfo.com/blog/springboot/2020-09-23-spring-boot-conditional" target="_blank" rel="noopener">ã€ŠSpring Bootæ¡†æ¶ä¸­å¦‚ä½•ä¼˜é›…çš„æ³¨å…¥å®ä½“Beanã€‹</a></p><p>æˆ‘ä»¬çš„éœ€æ±‚åœºæ™¯æ˜¯ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­èƒ½å¤Ÿå±è”½éƒ¨åˆ†æ¥å£ä»¥åŠUièµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ç»“åˆ<code>@Conditional</code>æ³¨è§£ä»¥åŠ<code>@Profile</code>æ³¨è§£æ¥å®ç°ä¸åŒç¯å¢ƒçš„<code>@Bean</code>åŠ è½½æœºåˆ¶å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„,è€ƒè™‘åˆ°åœ¨Spring Bootç¯å¢ƒä¸­å¤§éƒ¨åˆ†çš„ä¸­é—´ä»¶éƒ½æä¾›äº†é…ç½®åŒ–,ç±»ä¼¼<code>enable</code>å±æ€§æ¥å¼€å¯åŠ è½½é…ç½®ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨<code>spring.profiles</code>é€šè¿‡é…ç½®è¿›è¡ŒåŒºåˆ†</p><p>ç®€å•çš„ä¾‹å­ï¼šæˆ‘ä»¬å¯¹äºKnife4jçš„é…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«å¯¹åº”devç¯å¢ƒå’Œprodç¯å¢ƒ</p><p>é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><ul><li>å¼€å‘ç¯å¢ƒ(dev)</li></ul><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">application-dev.yml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">knife4j</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">enable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">## other properties.......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>ç”Ÿäº§ç¯å¢ƒ(prod)</li></ul><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">application-prod.yml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">knife4j</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">enable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">## other properties.......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç¨‹åºåœ¨å¯åŠ¨æ—¶ï¼Œåªéœ€è¦é€šè¿‡è®¾å®šSpring Bootåº”ç”¨çš„<code>Profiles</code>ï¼Œå°±å¯ä»¥å®ç°æˆ‘ä»¬çš„æ¥å£æ— æ³•è®¿é—®ï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®š<code>prod</code>ç¯å¢ƒï¼Œé‚£ä¹ˆè®¿é—®æ–‡æ¡£æ—¶ï¼Œä¼šå‡ºç°æ¥å£404çš„æƒ…å†µ~</p><p><strong>æ€»ç»“ï¼š</strong>è¿™ç§æƒ…å†µæ˜¯å¯¹äºJavaåç«¯åº”ç”¨çš„<code>Configuration</code>ç±»çº§åˆ«çš„æ§åˆ¶ï¼Œé€šè¿‡Spring Bootæ¡†æ¶æä¾›çš„<code>@Conditional</code>æ³¨è§£æ¥è¾¾åˆ°æ¡ä»¶æ³¨å…¥åŠéƒ¨åˆ†ä»£ç å¯é…ç½®ç”Ÿæ•ˆçš„ç›®çš„</p><p>è™½ç„¶ç•Œé¢å¯è®¿é—®ï¼Œä½†æ˜¯å¯¹äºæ¥å£çš„è§„èŒƒæè¿°å¹¶æ²¡æœ‰ä½œç”¨ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="22--åŸºäºservletä½“ç³»ä¸‹çš„filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½">2.2 â›” åŸºäºServletä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½<a class="hash-link" href="#22--åŸºäºservletä½“ç³»ä¸‹çš„filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŸºäºServletä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½æ˜¯ä¸€ç§æ‹¦æˆªæœºåˆ¶ï¼Œä¸»è¦åˆ©ç”¨äº†Servletè§„èŒƒä¸‹çš„Filteræœºåˆ¶ï¼Œå¯¹æ‰€æœ‰çš„è¯·æ±‚èµ„æºè¿›è¡Œæ‹¦æˆªï¼Œå¼€å‘è€…å¯ä»¥å¯¹æ‰€æœ‰æ¶‰åŠåˆ°Knife4jã€Swaggerèµ„æºçš„è¯·æ±‚éƒ½è¿›è¡Œæ‹¦æˆªå±è”½</p><p>åœºæ™¯çš„èµ„æºæ‹¦æˆªåœ°å€å¯ä»¥å‚è€ƒæ–‡æ¡£<a href="/docs/features/accessControl">ã€Šè®¿é—®æƒé™æ§åˆ¶ã€‹</a></p><p>æˆ‘ä»¬çŸ¥é“äº†è¦å±è”½çš„èµ„æºï¼Œä»¥åŠFilteræœºåˆ¶ï¼Œæ­¤æ—¶ï¼Œå¼€å‘è€…å³å¯ä»¥è‡ªå·±å®ç°Filterä»£ç ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ°Spring Bootçš„åº”ç”¨æ¡†æ¶ä¸­æ¥å£</p><p>åœ¨Knife4jæä¾›çš„<a href="https://gitee.com/xiaoym/knife4j/blob/dev/knife4j/knife4j-openapi2-spring-boot-starter/src/main/java/com/github/xiaoymin/knife4j/spring/filter/ProductionSecurityFilter.java" target="_blank" rel="noopener"><code>ProductionSecurityFilter.java</code></a> å¦‚ä¸‹ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">doFilter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">ServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token maybe-class-name">ServletResponse</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token maybe-class-name">FilterChain</span><span class="token plain"> chain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> throws </span><span class="token maybe-class-name">IOException</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token maybe-class-name">ServletException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token maybe-class-name">HttpServletRequest</span><span class="token plain"> httpServletRequest </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">HttpServletRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">production</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token known-class-name class-name">String</span><span class="token plain"> uri </span><span class="token operator">=</span><span class="token plain"> httpServletRequest</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">getRequestURI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// åŒ¹é…åˆ¤æ–­uriåœ°å€æ˜¯å¦æˆ‘ä»¬éœ€è¦å±è”½çš„èµ„æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token function" style="color:rgb(80, 250, 123)">match</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            chain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">doFilter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token maybe-class-name">HttpServletResponse</span><span class="token plain"> resp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token maybe-class-name">HttpServletResponse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            resp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">setStatus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">customCode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            resp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">sendError</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">customCode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;You do not have permission to access this page&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        chain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">doFilter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">   </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="23-ï¸-åŸºäºgatewayç½‘å…³ä½“ç³»ä¸‹çš„filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½">2.3 â›°ï¸ åŸºäºGatewayç½‘å…³ä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½<a class="hash-link" href="#23-ï¸-åŸºäºgatewayç½‘å…³ä½“ç³»ä¸‹çš„filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åŸºäºGatewayç½‘å…³ä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½å’ŒServletä½“ç³»ä¸‹çš„Filterè¿›è¡Œæ‹¦æˆªæ˜¯åŒä¸€ç§æ€æƒ³ï¼Œå› ä¸ºSpring Cloud Gatewayæ˜¯åŸºäºNettyé©±åŠ¨è®¾è®¡å®ç°ï¼Œä½†æ€æƒ³æ–¹æ³•æ˜¯åŒä¸€ç§</p><p>æ— éæ˜¯ä½¿ç”¨Spring Cloud Gatewayæä¾›çš„Filteræ¥å£ï¼Œè‡ªå®šä¹‰å®ç°matchåå±è”½è¿‡æ»¤</p><p>å¯ä»¥å‚è€ƒKnife4jä»£ç ä¸­çš„<a href="https://gitee.com/xiaoym/knife4j/blob/dev/knife4j/knife4j-gateway-spring-boot-starter/src/main/java/com/github/xiaoymin/knife4j/spring/gateway/filter/basic/WebFluxSecurityBasicAuthFilter.java" target="_blank" rel="noopener"><code>WebFluxSecurityBasicAuthFilter.java</code></a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="24--åŸºäºmavené¡¹ç›®çš„jaræ’é™¤æœºåˆ¶ä»æ ¹æºè§£å†³é—®é¢˜">2.4 ğŸ’€ åŸºäºMavené¡¹ç›®çš„jaræ’é™¤æœºåˆ¶ä»æ ¹æºè§£å†³é—®é¢˜<a class="hash-link" href="#24--åŸºäºmavené¡¹ç›®çš„jaræ’é™¤æœºåˆ¶ä»æ ¹æºè§£å†³é—®é¢˜" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¯¥æ–¹æ³•ä¹Ÿæ˜¯åˆ©ç”¨Mavené¡¹ç›®æä¾›çš„Profilesæœºåˆ¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ‰“åŒ…æ„å»ºçš„æ—¶å€™ï¼Œå¯ä»¥å¯¹ä¸€äº›ä¸éœ€è¦çš„jaråŒ…è¿›è¡Œexclusionæ’é™¤ï¼Œæ¯”å¦‚Knife4jçš„uiåŒ…æˆ–è€…swaggerå®˜æ–¹uiåŒ…ï¼Œè¿™ç§jaråŒ…éƒ½æ˜¯webjarç±»å‹ï¼Œé‡Œé¢å…¨éƒ¨æ˜¯é™æ€èµ„æº</p><p><code>Maven</code>çš„<code>Profiles</code>æ˜¯ä¸€ç§é…ç½®ç®¡ç†æœºåˆ¶ï¼Œå…è®¸ä½ æ ¹æ®ä¸åŒçš„ç¯å¢ƒæˆ–æ¡ä»¶è®¾ç½®å’Œæ¿€æ´»ä¸åŒçš„æ„å»ºé…ç½®ã€‚å¯ä»¥ä½¿ç”¨Profilesæ¥å®šä¹‰ä¸€ç»„æ’ä»¶ã€ä¾èµ–é¡¹å’Œæ„å»ºé€‰é¡¹ï¼Œè¿™äº›é€‰é¡¹åœ¨ç‰¹å®šçš„æ„å»ºç¯å¢ƒä¸­ç”Ÿæ•ˆ</p><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ç”Ÿäº§ç¯å¢ƒæ— éœ€è®¿é—®æä¾›å¤–éƒ¨å…¥å£ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ‰“åŒ…æ„å»ºçš„æ—¶å€™å¯ä»¥ç›´æ¥æ’é™¤å³å¯</p><p>åŸºäºè¿™ç§æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨é¡¹ç›®çš„<code>pom.xml</code>ä¸­é…ç½®Mavençš„Profilesï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">profiles</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">profile</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">id</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">dev</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">id</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">activation</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- æ¿€æ´»æ¡ä»¶ä¸º&quot;dev&quot;ç³»ç»Ÿå±æ€§å­˜åœ¨ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">property</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">name</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">env</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">name</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">value</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">dev</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">value</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">property</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">activation</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">profile</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">profile</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">id</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">prod</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">id</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">activation</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- æ¿€æ´»æ¡ä»¶ä¸º&quot;prod&quot;ç¯å¢ƒå˜é‡å­˜åœ¨ --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">property</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">name</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">env</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">name</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">value</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">prod</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">value</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">property</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">activation</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependencies</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.github.xiaoymin</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">knife4j-openapi3-spring-boot-starter</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">exclusions</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">exclusion</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.github.xiaoymin</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">knife4j-openapi3-ui</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">exclusion</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">exclusion</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">org.webjars</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">swagger-ui</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">exclusion</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">exclusions</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependencies</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">profile</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">profiles</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œä¸»è¦ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li>âœ… å£°æ˜äº†ä¸¤ä¸ªProfileç±»å‹ï¼Œidåˆ†åˆ«ä¸º<code>dev</code>ã€<code>prod</code></li><li>âœ… é…ç½®äº†ä¸¤ç§Profileç±»å‹çš„æ¿€æ´»æ¡ä»¶ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡åç§°æ¥è¿›è¡ŒåŒºåˆ†</li><li>âœ… åœ¨<code>prod</code>ç±»å‹ä¸‹é¢ï¼Œæˆ‘ä»¬é…ç½®çš„å¼•ç”¨jarçš„<code>exclusions</code>è§„åˆ™ï¼Œè¯¥Profileç±»å‹ä¸‹ä¼šæ’é™¤<code>knife4j-openapi3-ui</code>ã€<code>swagger-ui</code>è¿™ä¸¤ä¸ªjaråŒ…ï¼Œè€Œè¿™ä¸¤ä¸ªåŒ…åˆ†åˆ«æ˜¯Knife4jå’Œswaggerå®˜ç½‘æä¾›çš„Uièµ„æºåŒ…</li></ul><p>æ­¤æ—¶ï¼Œå½“æˆ‘ä»¬åœ¨é¡¹ç›®æ„å»ºæ‰“åŒ…æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¼ å…¥å˜é‡ï¼Œè¿›è¡Œæ„å»ºï¼Œæ’é™¤ç›¸å…³çš„jaråŒ…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mvn clean package -Pprod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="25--åŸºäºç”Ÿäº§ç¯å¢ƒnginxingressç­‰æ§åˆ¶è¯·æ±‚è·¯å¾„å¤„ç†">2.5 ğŸ’£ åŸºäºç”Ÿäº§ç¯å¢ƒNginxã€Ingressç­‰æ§åˆ¶è¯·æ±‚è·¯å¾„å¤„ç†<a class="hash-link" href="#25--åŸºäºç”Ÿäº§ç¯å¢ƒnginxingressç­‰æ§åˆ¶è¯·æ±‚è·¯å¾„å¤„ç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸Šé¢2.1~2.4æä¾›çš„æ–¹æ¡ˆéƒ½æ˜¯é€šè¿‡ä»£ç æˆ–è€…å·¥ç¨‹ä¸Šè¿›è¡Œé…ç½®ä»¥è¾¾åˆ°ç›®çš„ï¼Œå¦‚æœæˆ‘ä»¬çš„æœåŠ¡å·²ç»ä¸Šçº¿ï¼Œä¸ç®¡æ˜¯Nginxæˆ–è€…åœ¨Kubernetesé›†ç¾¤ç¯å¢ƒä¸­ï¼Œéƒ½å¯ä»¥é€šè¿‡Nginxã€Ingressç­‰ä»£ç†æœåŠ¡å™¨è¿›è¡Œé…ç½®æ‹¦æˆªå¤„ç†</p><p>ä¹Ÿä¸å¤±ä¸ºä¸€ç§å¤„ç†æ–¹å¼ã€‚</p><p>åœ¨Nginxä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®æ‹¦æˆªèµ„æºæ¥å£ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">location /doc.html </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">return</span><span class="token plain"> </span><span class="token number">403</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># è¿”å› 403 çŠ¶æ€ç è¡¨ç¤ºç¦æ­¢è®¿é—®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">location /swagger-ui.html </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">return</span><span class="token plain"> </span><span class="token number">403</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># è¿”å› 403 çŠ¶æ€ç è¡¨ç¤ºç¦æ­¢è®¿é—®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// å…¶ä»–è·¯ç”±æ¥å£åŠèµ„æº</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è€Œåœ¨Kubernetesé›†ç¾¤ç¯å¢ƒä¸­ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨Ingressæ§åˆ¶è¯·æ±‚,é…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)"># è½¬å‘doc.htmlåˆ°error-service,å¯ä»¥åœ¨è¯¥æœåŠ¡ä¸­å®šä¹‰ä¸€ä¸ªé”™è¯¯é¡µé¢æˆ–è¿”å›é€‚å½“çš„é”™è¯¯ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /doc.html</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">pathType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Prefix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3æ€»ç»“">3.æ€»ç»“<a class="hash-link" href="#3æ€»ç»“" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æœ¬æ–‡ä»å·¥ç¨‹ã€ä»£ç ç­‰å¤šæ–¹è§’åº¦ç»™å¤§å®¶æä¾›äº†ä¸€ç§è§£å†³æ€è·¯æ–¹æ¡ˆï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">æœ€å<!-- -->ç”± <b>xiaoyumin</b> <!-- -->äº <b><time datetime="2023-07-19T14:10:01.000Z">2023å¹´7æœˆ19æ—¥</time></b> <!-- -->æ›´æ–°</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1ç›®çš„" class="table-of-contents__link toc-highlight">1.ç›®çš„</a></li><li><a href="#2è§£å†³æ–¹æ¡ˆ" class="table-of-contents__link toc-highlight">2.è§£å†³æ–¹æ¡ˆ</a><ul><li><a href="#21--åŸºäºspring-bootæ¡†æ¶æä¾›çš„conditionalæ¡ä»¶æ§åˆ¶ç›¸å…³beançš„ç”Ÿæ•ˆ" class="table-of-contents__link toc-highlight">2.1 ğŸŒ± åŸºäºSpring Bootæ¡†æ¶æä¾›çš„<code>@Conditional</code>æ¡ä»¶æ§åˆ¶ç›¸å…³<code>@Bean</code>çš„ç”Ÿæ•ˆ</a></li><li><a href="#22--åŸºäºservletä½“ç³»ä¸‹çš„filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½" class="table-of-contents__link toc-highlight">2.2 â›” åŸºäºServletä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½</a></li><li><a href="#23-ï¸-åŸºäºgatewayç½‘å…³ä½“ç³»ä¸‹çš„filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½" class="table-of-contents__link toc-highlight">2.3 â›°ï¸ åŸºäºGatewayç½‘å…³ä½“ç³»ä¸‹çš„Filterè¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªå±è”½</a></li><li><a href="#24--åŸºäºmavené¡¹ç›®çš„jaræ’é™¤æœºåˆ¶ä»æ ¹æºè§£å†³é—®é¢˜" class="table-of-contents__link toc-highlight">2.4 ğŸ’€ åŸºäºMavené¡¹ç›®çš„jaræ’é™¤æœºåˆ¶ä»æ ¹æºè§£å†³é—®é¢˜</a></li><li><a href="#25--åŸºäºç”Ÿäº§ç¯å¢ƒnginxingressç­‰æ§åˆ¶è¯·æ±‚è·¯å¾„å¤„ç†" class="table-of-contents__link toc-highlight">2.5 ğŸ’£ åŸºäºç”Ÿäº§ç¯å¢ƒNginxã€Ingressç­‰æ§åˆ¶è¯·æ±‚è·¯å¾„å¤„ç†</a></li></ul></li><li><a href="#3æ€»ç»“" class="table-of-contents__link toc-highlight">3.æ€»ç»“</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">æ–‡æ¡£æŒ‡å—</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start">æ–‡æ¡£</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/community/simple-demo">ç¤ºä¾‹</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/changelog">æ›´æ–°æ—¥å¿—</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/upgrading/upgrading-to-v4">å‡çº§åˆ°v4.0</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾åŒº&amp;å‹é“¾</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://gitter.im/knife4j/knife4j" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.oschina.net/question/tag/swagger-bootstrap-ui" target="_blank" rel="noopener noreferrer" class="footer__link-item">å¼€æºä¸­å›½<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://springdoc.cn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">springä¸­æ–‡æ–‡æ¡£<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">å…³æ³¨å…¬ä¼—å·</div><ul class="footer__items clean-list"><li class="footer__item"><img src="/images/website/qrcode.jpg" width="150"></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/xiaoym/knife4j" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/xiaoymin/swagger-bootstrap-ui" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Apache License 2.0 | Copyright Â© 2018-2023-å…«ä¸€èœåˆ€ æµ™ICPå¤‡18027673å·-1 </div></div></div></footer></div>
<script src="/assets/js/runtime~main.2cdbce79.js"></script>
<script src="/assets/js/main.59d021b1.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKBX678" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>
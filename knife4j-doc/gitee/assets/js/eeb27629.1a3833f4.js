"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5667],{3905:(e,r,n)=>{n.d(r,{Zo:()=>l,kt:()=>d});var t=n(67294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function i(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var g=t.createContext({}),p=function(e){var r=t.useContext(g),n=r;return e&&(n="function"==typeof e?e(r):s(s({},r),e)),n},l=function(e){var r=p(e.components);return t.createElement(g.Provider,{value:r},e.children)},u={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},c=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,g=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),c=p(n),d=o,w=c["".concat(g,".").concat(d)]||c[d]||u[d]||a;return n?t.createElement(w,s(s({ref:r},l),{},{components:n})):t.createElement(w,s({ref:r},l))}));function d(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=c;var i={};for(var g in r)hasOwnProperty.call(r,g)&&(i[g]=r[g]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}c.displayName="MDXCreateElement"},43449:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>g,default:()=>d,frontMatter:()=>i,metadata:()=>p,toc:()=>u});var t=n(87462),o=n(63366),a=(n(67294),n(3905)),s=["components"],i={},g="springfox \u6e90\u7801\u5206\u6790(\u5341\u516b) \u81ea\u5b9a\u4e49\u6269\u5c55\u5b9e\u73b0\u5206\u7ec4\u7684\u6392\u5e8f",p={unversionedId:"action/springfox/springfox18",id:"action/springfox/springfox18",title:"springfox \u6e90\u7801\u5206\u6790(\u5341\u516b) \u81ea\u5b9a\u4e49\u6269\u5c55\u5b9e\u73b0\u5206\u7ec4\u7684\u6392\u5e8f",description:"\u65e2\u7136\u6211\u4eec\u5bf9springfox\u63d0\u4f9b\u7684\u63a5\u53e3\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u521d\u6b65\u7684\u4e86\u89e3,\u90a3\u4e48\u9488\u5bf9\u6211\u4eec\u5728\u5206\u7ec4\u63a5\u53e3\u6587\u7ae0\u4e2d\u63d0\u7684\u9700\u6c42,\u5982\u679c\u81ea\u5b9a\u4e49\u6269\u5c55\u5b9e\u73b0\u5206\u7ec4\u7684\u6392\u5e8f\u5982\u4f55\u505a\u5462\uff1f",source:"@site/docs/action/springfox/springfox18.md",sourceDirName:"action/springfox",slug:"/action/springfox/springfox18",permalink:"/docs/action/springfox/springfox18",draft:!1,tags:[],version:"current",lastUpdatedBy:"xiaoyumin",lastUpdatedAt:1660577531,formattedLastUpdatedAt:"2022\u5e748\u670815\u65e5",frontMatter:{},sidebar:"action",previous:{title:"springfox \u6e90\u7801\u5206\u6790(\u5341\u4e03) Swagger2\u63a5\u53e3\u6587\u6863\u793a\u4f8b\u63a5\u53e3api-docs",permalink:"/docs/action/springfox/springfox17"},next:{title:"springfox \u6e90\u7801\u5206\u6790(\u5341\u4e5d) guava\u5e93\u5b66\u4e60",permalink:"/docs/action/springfox/springfox19"}},l={},u=[],c={toc:u};function d(e){var r=e.components,n=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,t.Z)({},c,n,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"springfox-\u6e90\u7801\u5206\u6790\u5341\u516b-\u81ea\u5b9a\u4e49\u6269\u5c55\u5b9e\u73b0\u5206\u7ec4\u7684\u6392\u5e8f"},"springfox \u6e90\u7801\u5206\u6790(\u5341\u516b) \u81ea\u5b9a\u4e49\u6269\u5c55\u5b9e\u73b0\u5206\u7ec4\u7684\u6392\u5e8f"),(0,a.kt)("p",null,"\u65e2\u7136\u6211\u4eec\u5bf9springfox\u63d0\u4f9b\u7684\u63a5\u53e3\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u521d\u6b65\u7684\u4e86\u89e3,\u90a3\u4e48\u9488\u5bf9\u6211\u4eec\u5728\u5206\u7ec4\u63a5\u53e3\u6587\u7ae0\u4e2d\u63d0\u7684\u9700\u6c42,\u5982\u679c\u81ea\u5b9a\u4e49\u6269\u5c55\u5b9e\u73b0\u5206\u7ec4\u7684\u6392\u5e8f\u5982\u4f55\u505a\u5462\uff1f"),(0,a.kt)("p",null,"\u5728swagger-bootstrap-ui\u4ee5\u524d\u7684\u7248\u672c\u4e2d,\u5df2\u7ecf\u5b58\u5728\u4e86\u589e\u5f3a\u529f\u80fd,\u589e\u5f3a\u529f\u80fd\u4e3b\u8981\u7684\u65b9\u5f0f\u662f\u91cd\u5199\u4e86springfox\u7684\u63a5\u53e3,\u7136\u540e\u5728\u6211\u4eec\u81ea\u5b9a\u4e49\u7684ui\u4e2d\u6e32\u67d3\u5373\u53ef."),(0,a.kt)("p",null,"\u56e0\u4e3a",(0,a.kt)("inlineCode",{parentName:"p"},"SwaggerResource.java"),"\u4e2d\u6ca1\u6709\u63d0\u4f9b\u6392\u5e8f\u7684\u5b57\u6bb5\u5c5e\u6027,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6269\u5c55\u8be5\u7c7b,\u63d0\u4f9b\u4e00\u4e2a\u6392\u5e8f\u5b57\u6bb5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'/***\n *\n * @since:swagger-bootstrap-ui 1.9.4\n * @author <a href="mailto:xiaoymin@foxmail.com">xiaoymin@foxmail.com</a> \n * 2019/06/02 16:24\n */\npublic class SwaggerResourceExt extends SwaggerResource {\n\n    private Integer order;\n\n    public Integer getOrder() {\n        return order;\n    }\n\n    public void setOrder(Integer order) {\n        this.order = order;\n    }\n}\n')),(0,a.kt)("p",null,"\u5f88\u7b80\u5355,\u63d0\u4f9b\u4e00\u4e2aorder\u5c5e\u6027,\u8be5\u7c7b\u7ee7\u627f\u81easpringfox\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"SwaggerResource")),(0,a.kt)("p",null,"\u6269\u5c55\u4e86\u57fa\u7840\u5c5e\u6027\u7c7b,\u90a3\u4e48\u6211\u4eec\u63d0\u4f9b\u7684\u65b9\u5f0f\u4e5f\u9700\u8981\u8fdb\u884c\u6269\u5c55"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Component\n@Qualifier("swaggerResourcesExtProvider")\npublic class SwaggerResourcesExtProvider  {\n    private final String swagger1Url;\n    private final String swagger2Url;\n\n    @VisibleForTesting\n    boolean swagger1Available;\n    @VisibleForTesting\n    boolean swagger2Available;\n\n    private final DocumentationCache documentationCache;\n\n    @Autowired\n    public SwaggerResourcesExtProvider(Environment environment, DocumentationCache documentationCache) {\n        swagger1Url = environment.getProperty("springfox.documentation.swagger.v1.path", "/api-docs-ext");\n        swagger2Url = environment.getProperty("springfox.documentation.swagger.v2.path", "/v2/api-docs-ext");\n        swagger1Available = classByName("springfox.documentation.swagger1.web.Swagger1Controller").isPresent();\n        swagger2Available = classByName("springfox.documentation.swagger2.web.Swagger2Controller").isPresent();\n        this.documentationCache = documentationCache;\n    }\n\n    public List<SwaggerResourceExt> get() {\n        List<SwaggerResourceExt> resources = new ArrayList<SwaggerResourceExt>();\n\n        for (Map.Entry<String, Documentation> entry : documentationCache.all().entrySet()) {\n            String swaggerGroup = entry.getKey();\n            Documentation documentation=entry.getValue();\n            List<VendorExtension> vendorExtensions=documentation.getVendorExtensions();\n            if (swagger1Available) {\n                SwaggerResourceExt swaggerResource = resource(swaggerGroup, swagger1Url,vendorExtensions);\n                swaggerResource.setSwaggerVersion("1.2");\n            }\n\n            if (swagger2Available) {\n                SwaggerResourceExt swaggerResource = resource(swaggerGroup, swagger2Url,vendorExtensions);\n                swaggerResource.setSwaggerVersion("2.0");\n                resources.add(swaggerResource);\n            }\n        }\n        //\u6839\u636e\u81ea\u5b9a\u4e49\u6269\u5c55\u5c5e\u6027order\u8fdb\u884c\u6392\u5e8f\n        Collections.sort(resources, new Comparator<SwaggerResourceExt>() {\n            @Override\n            public int compare(SwaggerResourceExt o1, SwaggerResourceExt o2) {\n                return o1.getOrder().compareTo(o2.getOrder());\n            }\n        });\n        return resources;\n    }\n\n    private SwaggerResourceExt resource(String swaggerGroup, String baseUrl,List<VendorExtension> vendorExtensions) {\n        SwaggerResourceExt swaggerResource = new SwaggerResourceExt();\n        swaggerResource.setName(swaggerGroup);\n        swaggerResource.setUrl(swaggerLocation(baseUrl, swaggerGroup));\n        swaggerResource.setOrder(0);\n        //\u5224\u65ad\u662f\u5426\u4e0d\u4e3a\u7a7a\n        if (vendorExtensions!=null&&!vendorExtensions.isEmpty()){\n            Optional<VendorExtension> ov= FluentIterable.from(vendorExtensions).filter(new Predicate<VendorExtension>() {\n                @Override\n                public boolean apply(VendorExtension input) {\n                    return input.getClass().isAssignableFrom(OrderExtensions.class);\n                }\n            }).first();\n            if (ov.isPresent()){\n                OrderExtensions orderExtensions=(OrderExtensions) ov.get();\n                swaggerResource.setOrder(orderExtensions.getValue());\n            }\n        }\n        return swaggerResource;\n    }\n\n    private String swaggerLocation(String swaggerUrl, String swaggerGroup) {\n        String base = Optional.of(swaggerUrl).get();\n        if (Docket.DEFAULT_GROUP_NAME.equals(swaggerGroup)) {\n            return base;\n        }\n        return base + "?group=" + swaggerGroup;\n    }\n}\n')),(0,a.kt)("p",null,"\u9488\u5bf9\u539fspringfox\u7684\u65b9\u5f0f\u8fdb\u884c\u6269\u5c55,\u4e3b\u8981\u903b\u8f91"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9996\u5148\u83b7\u53d6Documentation\u7684Map\u96c6\u5408\u5bf9\u8c61,\u8fdb\u884c\u904d\u5386"),(0,a.kt)("li",{parentName:"ul"},"\u6211\u4eec\u7684\u63a5\u53e3\u53c2\u6570\u662f\u9700\u8981\u4ece\u5916\u90e8\u7531\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u7684\u4f20\u5165\u7684,\u90a3\u4e48\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u5229\u7528Docket\u5bf9\u8c61\u63d0\u4f9b\u7684\u6269\u5c55\u5c5e\u6027\u96c6\u5408\u6765\u64cd\u4f5c,",(0,a.kt)("inlineCode",{parentName:"li"},"swagger-bootstrap-ui"),"\u63d0\u4f9b\u4e86",(0,a.kt)("inlineCode",{parentName:"li"},"OrderExtensions"),"\u6269\u5c55,\u5f00\u53d1\u8005\u521b\u5efaDocket\u5bf9\u8c61\u65f6\u8fdb\u884c\u53c2\u6570\u4f20\u5165\u5373\u53ef"),(0,a.kt)("li",{parentName:"ul"},"\u7b5b\u9009Documentation\u7684\u6269\u5c55\u5c5e\u6027\u96c6\u5408,\u627e\u5230\u7b26\u5408\u89c4\u8303\u7684\u6269\u5c55,\u5982\u679c\u672a\u627e\u5230\u5219\u9ed8\u8ba4\u6392\u5e8f\u503c\u4e3a0")),(0,a.kt)("p",null,"\u91cd\u5199\u4e86\u83b7\u53d6",(0,a.kt)("inlineCode",{parentName:"p"},"SwaggerResource"),"\u96c6\u5408\u7684\u5de5\u5177\u7c7b,\u63a5\u4e0b\u6765\u91cd\u5199\u63a5\u53e3\u5c42"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@ApiIgnore\n@Controller\n@RequestMapping("/swagger-resources-ext")\npublic class SwaggerBootstrapUiResourceExtController {\n    private final SwaggerResourcesExtProvider swaggerResourcesExtProvider;\n\n    @Autowired\n    public SwaggerBootstrapUiResourceExtController(@Qualifier("swaggerResourcesExtProvider") SwaggerResourcesExtProvider swaggerResources) {\n        this.swaggerResourcesExtProvider = swaggerResources;\n    }\n\n    @RequestMapping\n    @ResponseBody\n    public ResponseEntity<List<SwaggerResourceExt>> swaggerResources() {\n        return new ResponseEntity<List<SwaggerResourceExt>>(swaggerResourcesExtProvider.get(), HttpStatus.OK);\n    }\n}\n')),(0,a.kt)("p",null,"\u6b64\u65f6,\u63d0\u4f9b\u4e00\u4e2a\u7c7b\u4f3cspringfox\u7684\u5206\u7ec4\u63a5\u53e3,\u901a\u8fc7\u5de5\u5177\u7c7b\u63d0\u4f9b,\u83b7\u53d6\u62ff\u5230\u5206\u7ec4\u4fe1\u606f"),(0,a.kt)("p",null,"\u6709\u4e86\u4ee5\u4e0a\u7684\u6269\u5c55\u5b9e\u73b0,\u6211\u4eecSwaggerConfiguration\u914d\u7f6e\u6587\u4ef6\u521b\u5efaDocket\u5bf9\u8c61\u65f6\u9700\u8981\u7a0d\u5fae\u505a\u4e00\u4e2a\u6539\u52a8"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Bean(value = "defaultApi")\n    public Docket defaultApi() {\n        ParameterBuilder parameterBuilder=new ParameterBuilder();\n        List<Parameter> parameters= Lists.newArrayList();\n        parameterBuilder.name("token").description("token\u4ee4\u724c").modelRef(new ModelRef("String"))\n                .parameterType("header")\n                .required(true).build();\n        parameters.add(parameterBuilder.build());\n\n        Docket docket=new Docket(DocumentationType.SWAGGER_2)\n                .apiInfo(apiInfo())\n                .groupName("\u9ed8\u8ba4\u63a5\u53e3")\n                .select()\n                .apis(RequestHandlerSelectors.basePackage("com.swagger.bootstrap.ui.demo.controller"))\n                //.apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))\n                .paths(PathSelectors.any())\n                .build()\n            //\u6dfb\u52a0\u6269\u5c55\n            .extensions(Lists.newArrayList(new OrderExtensions(1)))\n            .globalOperationParameters(parameters)\n                .securityContexts(Lists.newArrayList(securityContext())).securitySchemes(Lists.<SecurityScheme>newArrayList(apiKey()));\n        return docket;\n    }\n')),(0,a.kt)("p",null,"\u6b64\u65f6,\u6211\u4eec\u4f7f\u7528extensions\u65b9\u6cd5\u6dfb\u52a0\u6269\u5c55,\u8d4b\u503cOrderExtensions\u7684\u6392\u5e8forder\u503c"),(0,a.kt)("p",null,"\u6b64\u65f6\u6211\u4eec\u8bbf\u95ee\u63a5\u53e3",(0,a.kt)("inlineCode",{parentName:"p"},"/swagger-resoueces-ext"),"\u8fd4\u56de\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'[\n    {\n        "order": 1,\n        "name": "\u9ed8\u8ba4\u63a5\u53e3",\n        "url": "/v2/api-docs-ext?group=\u9ed8\u8ba4\u63a5\u53e3",\n        "swaggerVersion": "2.0",\n        "location": "/v2/api-docs-ext?group=\u9ed8\u8ba4\u63a5\u53e3"\n    },\n    {\n        "order": 2,\n        "name": "\u5206\u7ec4\u63a5\u53e3",\n        "url": "/v2/api-docs-ext?group=\u5206\u7ec4\u63a5\u53e3",\n        "swaggerVersion": "2.0",\n        "location": "/v2/api-docs-ext?group=\u5206\u7ec4\u63a5\u53e3"\n    }\n]\n')),(0,a.kt)("p",null,"\u6b64\u65f6,\u6211\u4eec\u5728Ui\u7aef\u5c31\u53ef\u4ee5\u81ea\u5b9a\u4e49\u63a5\u53e3\u5206\u7ec4\u7684\u6392\u5e8f\u4e86"),(0,a.kt)("p",null,"\u4ee5\u4e0a\u529f\u80fd\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"swagger-bootstrap-ui"),"1.9.4\u7248\u672c\u5df2\u7ecf\u5b9e\u73b0,\u5f00\u53d1\u8005\u5982\u679c\u6709\u6392\u5e8f\u7684\u9700\u6c42,\u53ef\u4ee5\u4f7f\u7528\u6b64\u65b9\u6cd5."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a"),"\u5728\u4f7f\u7528\u6b64\u529f\u80fd\u65f6,\u9700\u8981\u5728Swagger\u7684\u914d\u7f6e\u6587\u4ef6\u7c7b\u4e0a\u52a0\u4e0a",(0,a.kt)("inlineCode",{parentName:"p"},"@EnableSwaggerBootstrapUI"),"\u6ce8\u89e3"))}d.isMDXComponent=!0}}]);